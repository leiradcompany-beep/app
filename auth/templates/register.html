<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Register | LEIRAD Services</title>

    <!-- Google Fonts: Manrope -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Remix Icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../auth/styles/auth.css">
</head>

<body>

    <div class="auth-container">

        <!-- LEFT: VISUAL SIDE -->
        <div class="visual-side">
            <!-- Background Image -->
            <img src="../asset/register.gif" alt="Clean Kitchen" class="bg-image">

            <div class="visual-content">
                <a href="index.html" class="brand-logo">
                    <i class="ri-sparkling-2-fill" style="color: var(--accent);"></i> LEIRAD
                </a>
            </div>

            <div class="visual-content">
                <div class="testimonial-card">
                    <i class="ri-double-quotes-l quote-icon"></i>
                    <p class="quote-text">"Joining LEIRAD as a cleaner was the best career move I've made. The platform
                        is easy to use and the clients are wonderful."</p>
                    <div class="profile">
                        <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80"
                            class="profile-img" alt="User">
                        <div style="line-height: 1.2;">
                            <div style="font-weight: 700; font-size: 0.95rem;">Sarah Jenkins</div>
                            <div style="font-size: 0.8rem; opacity: 0.8;">Top Rated Cleaner</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RIGHT: FORM SIDE -->
        <div class="form-side">
            <div class="form-content">

                <div class="form-header">
                    <h1 class="form-title">Create Account</h1>
                    <p class="form-subtitle">Already have an account? <a href="login.html" class="link">Sign In</a></p>
                </div>

                <div class="role-selector">
                    <div class="role-card active" data-role="customer">
                        <i class="ri-calendar-check-line"></i>
                        <span>I want to book</span>
                    </div>
                    <div class="role-card" data-role="cleaner">
                        <i class="ri-briefcase-4-line"></i>
                        <span>I want to work</span>
                    </div>
                </div>
                <p class="form-subtitle" style="margin-top: -10px; margin-bottom: 20px;">
                    Choose your role to tailor the form to your needs.
                </p>

                <div id="customerFormContainer">
                    <form id="customerRegisterForm">
                        <div class="form-grid">
                            <!-- Personal Information Section -->
                            <div class="form-section-header full-width">
                                <h3>Personal Information</h3>
                            </div>

                            <div class="input-group">
                                <label class="label">First Name <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="text" class="input" name="first_name" placeholder="John" required
                                        autocomplete="given-name">
                                    <i class="ri-user-line icon"></i>
                                </div>
                            </div>

                            <div class="input-group">
                                <label class="label">Last Name <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="text" class="input" name="last_name" placeholder="Doe" required
                                        autocomplete="family-name">
                                    <i class="ri-user-line icon"></i>
                                </div>
                            </div>

                            <div class="input-group full-width">
                                <label class="label">Middle Name <span
                                        style="color: var(--text-light); font-weight: 400;">(Optional)</span></label>
                                <div class="input-wrapper">
                                    <input type="text" class="input" name="middle_name" placeholder="Middle name"
                                        autocomplete="additional-name">
                                    <i class="ri-user-line icon"></i>
                                </div>
                            </div>

                            <!-- Account Information Section -->
                            <div class="form-section-header full-width">
                                <h3>Account Information</h3>
                            </div>

                            <div class="input-group full-width">
                                <label class="label">Email Address <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="email" class="input" name="email" placeholder="john@example.com"
                                        required autocomplete="email">
                                    <i class="ri-mail-line icon"></i>
                                </div>
                                <small style="color: var(--text-light); display: block; margin-top: 6px;">We'll send a
                                    verification code to this email</small>
                            </div>

                            <div class="input-group">
                                <label class="label">Password <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="password" class="input" name="password" id="customerPassword"
                                        placeholder="••••••••" required autocomplete="new-password">
                                    <i class="ri-lock-password-line icon"></i>
                                    <i class="ri-eye-off-line password-toggle" id="customerToggleIcon"
                                        onclick="togglePw('customerPassword', 'customerToggleIcon')"></i>
                                </div>
                                <small style="color: var(--text-light); display: block; margin-top: 6px;">Minimum 8
                                    characters</small>
                            </div>

                            <div class="input-group">
                                <label class="label">Confirm Password <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="password" class="input" name="password_confirmation"
                                        id="customerConfirmPassword" placeholder="••••••••" required
                                        autocomplete="new-password">
                                    <i class="ri-lock-password-line icon"></i>
                                    <i class="ri-eye-off-line password-toggle" id="customerConfirmToggleIcon"
                                        onclick="togglePw('customerConfirmPassword', 'customerConfirmToggleIcon')"></i>
                                </div>
                            </div>

                            <label class="terms">
                                <input type="checkbox" name="terms" required>
                                <span>I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#"
                                        class="link">Privacy Policy</a></span>
                            </label>

                            <div id="cf-turnstile-register-customer" class="turnstile-container full-width"
                                style="margin: 8px 0;">
                            </div>
                            <button type="submit" class="btn-submit full-width btn-enhanced">
                                Create Customer Account <i class="ri-arrow-right-line"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <div id="cleanerFormContainer" style="display: none;">
                    <form id="cleanerRegisterForm">
                        <div class="form-grid">
                            <!-- Personal Information Section -->
                            <div class="form-section-header full-width">
                                <h3>Personal Information</h3>
                            </div>

                            <div class="input-group">
                                <label class="label">First Name <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="text" class="input" name="first_name" placeholder="Jane" required
                                        autocomplete="given-name">
                                    <i class="ri-user-line icon"></i>
                                </div>
                            </div>

                            <div class="input-group">
                                <label class="label">Last Name <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="text" class="input" name="last_name" placeholder="Smith" required
                                        autocomplete="family-name">
                                    <i class="ri-user-line icon"></i>
                                </div>
                            </div>

                            <div class="input-group full-width">
                                <label class="label">Middle Name <span
                                        style="color: var(--text-light); font-weight: 400;">(Optional)</span></label>
                                <div class="input-wrapper">
                                    <input type="text" class="input" name="middle_name" placeholder="Middle name"
                                        autocomplete="additional-name">
                                    <i class="ri-user-line icon"></i>
                                </div>
                            </div>

                            <!-- Account Information Section -->
                            <div class="form-section-header full-width">
                                <h3>Account Information</h3>
                            </div>

                            <div class="input-group full-width">
                                <label class="label">Email Address <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="email" class="input" name="email" placeholder="jane@example.com"
                                        required autocomplete="email">
                                    <i class="ri-mail-line icon"></i>
                                </div>
                                <small style="color: var(--text-light); display: block; margin-top: 6px;">We'll send a
                                    verification code to this email</small>
                            </div>

                            <div class="input-group">
                                <label class="label">Password <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="password" class="input" name="password" id="cleanerPassword"
                                        placeholder="••••••••" required autocomplete="new-password">
                                    <i class="ri-lock-password-line icon"></i>
                                    <i class="ri-eye-off-line password-toggle" id="cleanerToggleIcon"
                                        onclick="togglePw('cleanerPassword', 'cleanerToggleIcon')"></i>
                                </div>
                                <small style="color: var(--text-light); display: block; margin-top: 6px;">Minimum 8
                                    characters</small>
                            </div>

                            <div class="input-group">
                                <label class="label">Confirm Password <span class="required">*</span></label>
                                <div class="input-wrapper">
                                    <input type="password" class="input" name="password_confirmation"
                                        id="cleanerConfirmPassword" placeholder="••••••••" required
                                        autocomplete="new-password">
                                    <i class="ri-lock-password-line icon"></i>
                                    <i class="ri-eye-off-line password-toggle" id="cleanerConfirmToggleIcon"
                                        onclick="togglePw('cleanerConfirmPassword', 'cleanerConfirmToggleIcon')"></i>
                                </div>
                            </div>

                            <!-- CLEANER SPECIFIC FIELDS -->
                            <div class="form-section-header full-width" style="margin-top: 20px;">
                                <h3>Professional Details</h3>
                                <p class="form-subtitle" style="margin-top: 4px;">Provide details to help us verify and
                                    match you to jobs.</p>
                            </div>
                            <div class="cleaner-fields full-width form-grid"
                                style="margin: 0; padding: 0; width: 100%;">

                                <div class="input-group">
                                    <label class="label">Experience (Years) <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <input type="number" class="input" name="experience" placeholder="e.g. 3"
                                            min="0" required>
                                        <i class="ri-history-line icon"></i>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label class="label">Specialization <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <select class="input" name="specialization" required>
                                            <option value="" disabled selected>Select Type</option>
                                            <option value="residential">Residential</option>
                                            <option value="commercial">Commercial</option>
                                            <option value="deep_cleaning">Deep Cleaning</option>
                                            <option value="move_in_out">Move-In / Move-Out</option>
                                        </select>
                                        <i class="ri-arrow-down-s-line icon" style="pointer-events: none;"></i>
                                    </div>
                                </div>

                                <div class="input-group full-width">
                                    <label class="label">Skills <span
                                            style="color: var(--text-light); font-weight: 400;">(Optional)</span></label>
                                    <div class="input-wrapper">
                                        <input type="text" class="input" name="skills"
                                            placeholder="e.g. Ironing, Windows, Eco-friendly products">
                                        <i class="ri-list-check icon"></i>
                                    </div>
                                    <small style="color: var(--text-light); display: block; margin-top: 6px;">Separate
                                        multiple skills with commas</small>
                                </div>

                                <div class="input-group full-width">
                                    <label class="label">Primary Valid ID <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <select class="input" name="valid_id_type" required>
                                            <option value="" disabled selected>Select ID Type</option>
                                            <option value="passport">Philippine Passport</option>
                                            <option value="drivers_license">Driver's License</option>
                                            <option value="sss_umid">SSS UMID Card</option>
                                            <option value="philhealth">PhilHealth ID</option>
                                            <option value="tin">TIN Card</option>
                                            <option value="postal">Postal ID</option>
                                            <option value="voters">Voter's ID</option>
                                            <option value="prc">PRC ID</option>
                                            <option value="senior_citizen">Senior Citizen ID</option>
                                            <option value="ofw">OFW ID</option>
                                            <option value="national_id">National ID (PhilSys ID)</option>
                                            <option value="gsis">GSIS ID</option>
                                            <option value="ibp">IBP ID</option>
                                            <option value="diplomat">Diplomat ID</option>
                                            <option value="alien_cr">Alien Certificate of Registration (ACR I-Card)
                                            </option>
                                            <option value="gocc">GOCC/Government Office ID</option>
                                            <option value="other">Other Valid Government ID</option>
                                        </select>
                                        <i class="ri-arrow-down-s-line icon" style="pointer-events: none;"></i>
                                    </div>
                                </div>

                                <div class="full-width file-upload-container">
                                    <label class="file-label" id="idFrontLabel">
                                        <i class="ri-id-card-line"></i>
                                        <span>Front ID Photo</span>
                                        <input type="file" name="id_front" id="idFrontInput" class="file-input-hidden"
                                            accept="image/*" required
                                            onchange="previewImage(this, 'idFrontPreview', 'idFrontLabel')">
                                        <img id="idFrontPreview" src="" alt="Front ID Preview"
                                            style="display: none; width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; border-radius: 12px;">
                                    </label>
                                    <label class="file-label" id="idBackLabel">
                                        <i class="ri-id-card-fill"></i>
                                        <span>Back ID Photo</span>
                                        <input type="file" name="id_back" id="idBackInput" class="file-input-hidden"
                                            accept="image/*" required
                                            onchange="previewImage(this, 'idBackPreview', 'idBackLabel')">
                                        <img id="idBackPreview" src="" alt="Back ID Preview"
                                            style="display: none; width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; border-radius: 12px;">
                                    </label>
                                </div>
                                <div class="full-width"
                                    style="color: var(--text-light); font-size: 0.85rem; margin-top: -6px;">
                                    Accepted formats: JPG, PNG up to 5MB each.
                                </div>

                                <div class="approval-notice">
                                    <i class="ri-information-fill"></i>
                                    <div>
                                        <strong>Approval Required:</strong> Your account will be reviewed by our team
                                        before you can start accepting jobs. This usually takes 24-48 hours.
                                    </div>
                                </div>

                            </div>

                            <label class="terms">
                                <input type="checkbox" name="terms" required>
                                <span>I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#"
                                        class="link">Privacy Policy</a></span>
                            </label>

                            <div id="cf-turnstile-register-cleaner" class="turnstile-container full-width"
                                style="margin: 8px 0;">
                            </div>
                            <button type="submit" class="btn-submit full-width btn-enhanced">
                                Apply as Cleaner <i class="ri-arrow-right-line"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <div class="back-container">
                    <a href="../../index.html" class="back-link">
                        <i class="ri-arrow-left-line"></i> Back to Home
                    </a>
                </div>

            </div>
        </div>
    </div>

    <!-- OTP Modal (Styled via auth.css) -->
    <div id="otpModal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-header">
                <div class="modal-title">Verify Your Email</div>
                <div id="otpCloseBtn" class="modal-close" aria-label="Close"><i class="ri-close-line"></i></div>
            </div>
            <div class="modal-body">
                <p>We have sent a 6-digit code to your email. Please enter it below to verify your account.</p>
                <div class="input-group" style="margin: 16px 0;">
                    <label class="label">OTP Code</label>
                    <div class="input-wrapper">
                        <input type="tel" id="otpInput" class="input" placeholder="• • • • • •" maxlength="6"
                            inputmode="numeric" pattern="[0-9]*"
                            style="text-align: center; letter-spacing: 5px; font-size: 1.3rem;">
                    </div>
                </div>
                <button id="verifyOtpBtn" class="btn-submit">Verify OTP</button>
                <p id="otpCountdown" style="margin-top: 8px; font-size: 0.9rem; color: var(--text-light);"></p>
                <p style="margin-top: 10px; font-size: 0.9rem;">Didn't receive code? <a href="#" id="resendOtpLink"
                        class="link">Resend</a></p>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Image Utils -->
    <script src="../../common/scripts/image-utils.js"></script>
    <!-- UI Utils -->
    <script src="../../common/scripts/ui-utils.js"></script>
    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <!-- Auth Script -->
    <script src="../scripts/auth.js"></script>

    <script>
        // Form Submission
        document.getElementById('customerRegisterForm').addEventListener('submit', handleRegister);
        document.getElementById('cleanerRegisterForm').addEventListener('submit', handleRegister);
        (function () {
            var base = getApiBaseUrl();
            $.getJSON(base + '/turnstile/sitekey').done(function (res) {
                var key = (res && typeof res.site_key === 'string') ? res.site_key : String(res && res.site_key || '');
                if (!key || key === '') return;
                var el1 = document.getElementById('cf-turnstile-register-customer');
                var el2 = document.getElementById('cf-turnstile-register-cleaner');
                if (!el1 || !el2) return;
                // Avoid auto-render by using a neutral class; render manually
                function render() {
                    if (window.turnstile && typeof key === 'string') {
                        try {
                            window.turnstile.render(el1, { sitekey: key, theme: 'light' });
                            window.turnstile.render(el2, { sitekey: key, theme: 'light' });
                        } catch (e) {
                            console.error('Turnstile render error', e);
                        }
                    } else {
                        setTimeout(render, 100);
                    }
                }
                render();
            });
        })();

            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });

            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.keyCode === 123)) {
                    e.preventDefault();
                }
            });
    </script>
</body>

</html>
